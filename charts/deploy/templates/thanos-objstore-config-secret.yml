{{- define "pelorus.thanos.objstore.config" }}
type: s3
config:
  bucket: thanos
  endpoint: s3.noobaa.svc
  access_key: {{ .Values.noobaa_aws_access_key | quote}}
  secret_key: {{ .Values.noobaa_aws_secret_access_key | quote}}
  http_config:
    insecure_skip_verify: true
{{- end }}
---
apiVersion: v1
data:
  thanos.yaml: {{ include "pelorus.thanos.objstore.config" . | b64enc }}
kind: Secret
metadata:
  name: thanos-objstore-config
type: Opaque
